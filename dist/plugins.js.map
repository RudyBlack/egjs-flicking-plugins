{"version":3,"file":"plugins.js","sources":["../src/Parallax.ts","../src/Fade.ts","../src/AutoPlay.ts","../src/index.ts"],"sourcesContent":["import Flicking, { FlickingEvent, Plugin } from \"@egjs/flicking\";\n\n/**\n * You can apply parallax effect while panel is moving.\n * @ko 패널들을 움직이면서 parallax 효과를 부여할 수 있습니다.\n * @memberof eg.Flicking.plugins\n */\nclass Parallax implements Plugin {\n  /**\n   * @param - Selector of the element to apply parallax effect <ko> Parallax 효과를 적용할 엘리먼트의 선택자 </ko>\n   * @param - Effect amplication scale <ko>효과 증폭도</ko>\n   * @example\n   * flicking.addPlugins(new eg.Flicking.plugins.Parallax(\"img\", 1));\n   */\n  constructor(private selector: string = \"\", private scale: number = 1) {}\n  public init(flicking: Flicking): void {\n    flicking.on(\"move\", this.onMove);\n    this.move(flicking);\n  }\n  public update(flicking: Flicking): void {\n    this.move(flicking);\n  }\n  public destroy(flicking: Flicking): void {\n    flicking.off(\"move\", this.onMove);\n  }\n  private onMove = (e: FlickingEvent): void => {\n    this.move(e.currentTarget);\n  }\n  private move(flicking: Flicking): void {\n    const panels = flicking.getVisiblePanels();\n\n    panels.forEach(panel => {\n      const progress = panel.getOutsetProgress();\n      const el = panel.getElement();\n      const target = el.querySelector<HTMLElement>(this.selector)!;\n      const parentTarget = target.parentNode as Element;\n      const rect = target.getBoundingClientRect();\n      const parentRect = parentTarget.getBoundingClientRect();\n      const position = (parentRect.width - rect.width) / 2 * progress * this.scale;\n      const transform = `translate(-50%) translate(${position}px)`;\n      const style = target.style;\n\n      style.cssText += `transform: ${transform};-webkit-transform: ${transform};-ms-transform:${transform}`;\n    });\n  }\n}\nexport default Parallax;\n","import Flicking, { FlickingEvent, Plugin } from \"@egjs/flicking\";\n\n/**\n * You can apply fade in / out effect while panel is moving.\n * @ko 패널들을 움직이면서 fade in / out 효과를 부여할 수 있습니다.\n * @memberof eg.Flicking.plugins\n */\nclass Fade implements Plugin {\n  /**\n   * @param - The selector of the element to which the fade effect is to be applied. If the selector is blank, it applies to panel element. <ko>Fade 효과를 적용할 대상의 선택자. 선택자가 공백이면 패널 엘리먼트에 적용된다.</ko>\n   * @param - Effect amplication scale <ko>효과 증폭도</ko>\n   * @example\n   * flicking.addPlugins(new eg.Flicking.plugins.Fade(\"p\", 1));\n   */\n  constructor(private selector: string = \"\", private scale: number = 1) {}\n  public init(flicking: Flicking): void {\n    flicking.on(\"move\", this.onMove);\n    this.move(flicking);\n  }\n  public update(flicking: Flicking): void {\n    this.move(flicking);\n  }\n  public destroy(flicking: Flicking): void {\n    flicking.off(\"move\", this.onMove);\n  }\n  private onMove = (e: FlickingEvent): void => {\n    this.move(e.currentTarget);\n  }\n  private move(flicking: Flicking): void {\n    const panels = flicking.getVisiblePanels();\n    const selector = this.selector;\n    const scale = this.scale;\n\n    panels.forEach(panel => {\n      const progress = panel.getOutsetProgress();\n      const el = panel.getElement();\n      const target = selector ? el.querySelector<HTMLElement>(selector)! : el;\n      const opacity = Math.min(1, Math.max(0, (1 - Math.abs(progress * scale))));\n\n      target.style.opacity = `${opacity}`;\n    });\n  }\n}\n\nexport default Fade;\n","import Flicking, { FlickingEvent, Plugin, Direction } from \"@egjs/flicking\";\n\ninterface AutoPlayOptions {\n  duration: number;\n  direction: Direction[keyof Direction];\n  stopOnHover: boolean;\n}\n\n// tslint:disable-next-line naming-convention\nconst DEFAULT_OPTION: AutoPlayOptions = {\n  duration: 2000,\n  direction: \"NEXT\",\n  stopOnHover: false,\n};\n\n/**\n * Plugin that allow you to automatically move to the next/previous panel, on a specific time basis\n * @ko 일정 시간마다, 자동으로 다음/이전 패널로 넘어가도록 할 수 있는 플러그인\n * @memberof eg.Flicking.plugins\n */\nclass AutoPlay implements Plugin {\n  /* Options */\n  private duration: AutoPlayOptions[\"duration\"];\n  private direction: AutoPlayOptions[\"direction\"];\n  private stopOnHover: AutoPlayOptions[\"stopOnHover\"];\n\n  /* Internal Values */\n  private flicking: Flicking | null = null;\n  private timerId = 0;\n\n  /**\n   * @param options Options for the AutoPlay instance.<ko>AutoPlay 옵션</ko>\n   * @param options.duration Time to wait before moving on to the next panel.<ko>다음 패널로 움직이기까지 대기 시간</ko>\n   * @param options.direction The direction in which the panel moves.<ko>패널이 움직이는 방향</ko>\n   * @param options.stopOnHover Whether to stop when mouse hover upon the element.<ko>엘리먼트에 마우스를 올렸을 때 AutoPlay를 정지할지 여부</ko>\n   * @example\n   * flicking.addPlugins(new eg.Flicking.plugins.AutoPlay(2000, \"NEXT\"));\n   */\n  constructor(options: Partial<AutoPlayOptions> = DEFAULT_OPTION, direction: AutoPlayOptions[\"direction\"] = DEFAULT_OPTION.direction) {\n    if (typeof options === \"number\") {\n      // Fallback for previous interface\n      this.duration = options as number;\n      this.direction = direction;\n      this.stopOnHover = DEFAULT_OPTION.stopOnHover;\n      return;\n    }\n\n    const mergedOptions = {\n      ...DEFAULT_OPTION,\n      ...options,\n    } as AutoPlayOptions;\n    const { duration, direction: dir, stopOnHover } = mergedOptions;\n\n    this.duration = duration;\n    this.direction = dir;\n    this.stopOnHover = stopOnHover;\n  }\n\n  public init(flicking: Flicking): void {\n    flicking.on({\n      move: this.onStop,\n      holdStart: this.onStop,\n      select: this.onPlay,\n      moveEnd: this.onPlay,\n    });\n\n    this.flicking = flicking;\n    if (this.stopOnHover) {\n      const targetEl = this.flicking.getElement();\n      targetEl.addEventListener(\"mouseenter\", this.onMouseEnter, false);\n      targetEl.addEventListener(\"mouseleave\", this.onMouseLeave, false);\n    }\n\n    this.play(flicking);\n  }\n\n  public destroy(flicking: Flicking): void {\n    this.onStop();\n\n    flicking.off(\"moveStart\", this.onStop);\n    flicking.off(\"holdStart\", this.onStop);\n    flicking.off(\"moveEnd\", this.onPlay);\n    flicking.off(\"select\", this.onPlay);\n\n    const targetEl = flicking.getElement();\n    targetEl.removeEventListener(\"mouseenter\", this.onMouseEnter, false);\n    targetEl.removeEventListener(\"mouseleave\", this.onMouseLeave, false);\n\n    this.flicking = null;\n  }\n\n  private play(flicking: Flicking) {\n    this.onStop();\n\n    this.timerId = window.setTimeout(() => {\n      flicking[this.direction === \"NEXT\" ? \"next\" : \"prev\"]();\n\n      this.play(flicking);\n    }, this.duration);\n  }\n\n  private onPlay = (e: FlickingEvent): void => {\n    this.play(e.currentTarget);\n  }\n\n  private onStop = () => {\n    clearTimeout(this.timerId);\n  }\n\n  private onMouseEnter = () => {\n    this.onStop();\n  }\n\n  private onMouseLeave = () => {\n    this.play(this.flicking!);\n  }\n}\n\nexport default AutoPlay;\n","/**\n * @namepsace eg.Flicking\n */\n/**\n * @namepsace eg.Flicking.plugins\n */\nimport Parallax from \"./Parallax\";\nimport Fade from \"./Fade\";\nimport AutoPlay from \"./AutoPlay\";\n\nexport {\n  Parallax,\n  Fade,\n  AutoPlay,\n};\n"],"names":["selector","scale","e","_this","move","currentTarget","flicking","on","onMove","off","panels","getVisiblePanels","forEach","panel","progress","getOutsetProgress","el","getElement","target","querySelector","parentTarget","parentNode","rect","getBoundingClientRect","parentRect","position","width","transform","style","cssText","opacity","Math","min","max","abs","DEFAULT_OPTION","duration","direction","stopOnHover","options","play","clearTimeout","timerId","onStop","mergedOptions","tslib_1","dir","holdStart","select","onPlay","moveEnd","targetEl","addEventListener","onMouseEnter","onMouseLeave","removeEventListener","window","setTimeout"],"mappings":"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"}